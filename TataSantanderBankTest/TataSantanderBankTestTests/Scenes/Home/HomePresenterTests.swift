//
//  HomePresenterTests.swift
//  Bank
//
//  Created by Matheus Rodrigues Ribeiro on 27/04/20.
//  Copyright (c) 2020 Bank. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

@testable import TataSantanderBankTest
import XCTest

class HomePresenterTests: XCTestCase
{
  // MARK: Subject under test
  
    var sut: HomePresenter!
    let spy = HomeDisplayLogicSpy()
  
  // MARK: Test lifecycle
  
  override func setUp()
  {
    super.setUp()
    setupHomePresenter()
  }
  
  override func tearDown()
  {
    super.tearDown()
  }
  
  // MARK: Test setup
  
  func setupHomePresenter()
  {
    sut = HomePresenter()
    sut.viewController = spy
  }
  
  // MARK: Test doubles
  
    class HomeDisplayLogicSpy: HomeDisplayLogic
    {
        var statementsList:Home.StatementList.ViewModel?
        var error:Home.StatementList.Error?
        
        func displayStatements(viewModel: Home.StatementList.ViewModel) {
            self.statementsList = viewModel
        }
        
        func displayError(error: Home.StatementList.Error) {
            self.error = error
        }
    }
  
    // MARK: Tests
    func testDisplayEmptyLoadStatements() {
        let viewModel = Home.StatementList.ViewModel(statements: [])
        sut.presentStatements(response: viewModel)
        XCTAssert(spy.statementsList != nil && spy.statementsList!.statements.isEmpty)
    }
    
}
