//
//  LoginRouter.swift
//  KssiusBank
//
//  Created by Cassio Sousa on 15/06/23.
//  Copyright (c) 2023 ___ORGANIZATIONNAME___. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

@objc protocol LoginRoutingLogic
{
    func routeToPresentHome(segue: UIStoryboardSegue?)
}

protocol LoginDataPassing
{
    var dataStore: LoginDataStore? { get }
}

final class LoginRouter: NSObject, LoginRoutingLogic, LoginDataPassing {
    weak var viewController: LoginViewController?
    var dataStore: LoginDataStore?

    // MARK: Routing

    func routeToPresentHome(segue: UIStoryboardSegue?){
        if let segue = segue {
            let destinationVC = segue.destination as? HomeViewController
            var destinationDS = destinationVC?.router?.dataStore
            passDataToHome(source: dataStore!, destination: &destinationDS)
        } else {
            let storyboard = UIStoryboard(name: "Main", bundle: nil)
            let destinationVC = storyboard.instantiateViewController(withIdentifier: "HomeViewController") as! HomeViewController
            var destinationDS = destinationVC.router?.dataStore
            passDataToHome(source: dataStore, destination: &destinationDS)
            navigateToHome(source: viewController, destination: destinationVC)
        }
    }

    // MARK: Navigation

    func navigateToHome(source: LoginViewController?, destination: HomeViewController?){
        guard let destination = destination else {
            printIfDebug("Cannot navigate to home.")
            return }
        source?.show(destination, sender: nil)
    }

    // MARK: Passing data

    func passDataToHome(source: LoginDataStore?, destination: inout HomeDataStore?){
        destination?.userAccount = source?.userAccount
    }
}
