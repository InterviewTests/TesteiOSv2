//
//  LoginWorker.swift
//  KssiusBank
//
//  Created by Cassio Sousa on 15/06/23.
//  Copyright (c) 2023 CÃ¡ssio Sousa. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol LoginWorkerProtocol {
    func login(username: String, password: String, completion: @escaping (Result<UserAccountModel, UserFailure>) -> Void)
}

final class LoginWorker{

    // MARK: - Properties

    private let authenticaionRepository: AuthenticationRepositoryProtocol
    private let authenticaionLocalRepository: AuthenticationLocalRepositoryProtocol

    // MARK: - Inits

    init(authenticaionRepository: AuthenticationRepositoryProtocol,
         authenticaionLocalRepository: AuthenticationLocalRepositoryProtocol) {
        self.authenticaionRepository = authenticaionRepository
        self.authenticaionLocalRepository = authenticaionLocalRepository
    }
}

extension LoginWorker: LoginWorkerProtocol {
    func login(username: String, password: String, completion: @escaping (Result<UserAccountModel, UserFailure>) -> Void) {
        let requestModel: LoginRequestModel = .init(username: username, password: password)
        authenticaionRepository.perform(login: .loginRequest,
                                        with: requestModel, completion: completion )
    }
}

