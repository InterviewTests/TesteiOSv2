//
//  LoginRouter.swift
//  BankInterviewApp
//
//  Created by Osias Carneiro on 10/03/20.
//  Copyright (c) 2020 Osias Carneiro. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit


protocol LoginDataPassing
{
  var dataStore: LoginDataStore? { get }
}

protocol LoginRoutingLogic
{
    func routeToStatements()
    func routeToSomewhere(segue: UIStoryboardSegue)
}

class LoginRouter: NSObject, LoginDataPassing, LoginRoutingLogic
{
    private let statementsSegue = "LoginViewControllerSegue"
    private let selector: Selector
    weak var viewController: LoginViewController?
    internal var dataStore: LoginDataStore?
  
    override init()
    {
        selector = NSSelectorFromString("routeTo\(statementsSegue)WithSegue:")
        super.init()
    }
    
  // MARK: Routing
  
  func routeToSomewhere(segue: UIStoryboardSegue)
  {
      let destinationVC = segue.destination as! StatementsViewController
      var destinationDS = destinationVC.router!.dataStore!
      passDataToStatements(source: dataStore!, destination: &destinationDS)
  }
  
    // MARK: Navigation
    
    func routeToStatements() {
        viewController?.performSegue(withIdentifier: statementsSegue, sender: nil)
    }
    
    override func responds(to aSelector: Selector!) -> Bool {
        return aSelector == selector
    }
  
  // MARK: Passing data
  
  private func passDataToStatements(source: LoginDataStore, destination: inout StatementsDataStore)
  {
    guard let response = source.response else { return }
    destination.userData = Statements.UserData.ViewModel(id: response.id,
                                                         name: response.name,
                                                         agency: response.agency,
                                                         account: response.account,
                                                         balance: response.balance)
  }
}
